<!DOCTYPE HTML>
<html>
  <head> <meta charset="utf-8"></head>
  <body>
    <div id="log"></div>
    <script type="text/javascript">
      function log(msg) {
        var d = document.createElement("div");
        d.appendChild(document.createTextNode(msg));
        document.getElementById("log").appendChild(d);
        console.log(msg);
      }
      function printCurLabel(nr) {
        log(nr+': { LABEL: '+Sandbox.getPrivacyLabel() + ', ' + Sandbox.getTrustLabel()+
            '; CLEAR: '+Sandbox.getPrivacyClearance() + ', ' + Sandbox.getTrustClearance()+'}')
      }
      var sA = new Sandbox(new Label(new Role("a.com")));
      printCurLabel(1);

      sA.schedule('done({val : 42, vax : 54 });')

      sA.ondone(function() {
        printCurLabel(2);
        log("val = "+sA.result)
        printCurLabel(3);
        log("val = "+sA.result.val)
        printCurLabel(4);
        log("vax = "+sA.result.vax)
        printCurLabel(5);
      });


    </script>
  </body>
</html>
